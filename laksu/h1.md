
## Tehtävät

![image](https://github.com/JuuHil/PenTest/assets/122887067/902c5803-e673-4413-a19f-af698189cf69)

## Rauta

    Koneen rauta ja käyttöjärjestelmä
    CPU:  i7-13700K 5,4GHz
    RAM:  64GB DDR5 5200Mhz
    GPU:  RTX 3080 OC 10G
    OS:   Windows 11 Pro, Versio 23H2
    
    
    Versiot. 
    
    VB:   Kali Linux 6.6.9 
    
    
## x) Lue/katso ja tiivistä

## e) Asenna Linux virtuaalikoneeseen. Suosittelen joko Kali (viimeisin versio) tai Debian 12-Bookworm.
Aloitin lataamalla Kali linuxia (https://www.kali.org/get-kali/#kali-live).

![image](https://github.com/JuuHil/PenTest/assets/122887067/0a240766-1fdf-4420-816f-d4066886ea08)

Avasin VirtualBoxin ja painoin "New"

![image](https://github.com/JuuHil/PenTest/assets/122887067/691e13a5-583c-4254-9305-eb6066af9c2e)

Valitsin "ISO Image:" kohtaan juuri ladatun Kali linuxin ISO tiedoston. > Next

Laitoin "Username" ja "Password". Vahva salasana! > Next

Annoin virtuaali koneelle 8GB (8192MB) muistia ja kaksi prosessoria. > Next

"Create a Virtual Hard Disk Now" Levytilaa annoin 60GB > Next > Finish 

Nyt on uusi x luotu > Start

Ruudulle pamahti

![image](https://github.com/JuuHil/PenTest/assets/122887067/47fe6231-c7ce-441c-a1b4-826883b634ec)

Live system (amd64) > Enter

![image](https://github.com/JuuHil/PenTest/assets/122887067/b6a46556-7db7-4631-8c14-fae6290803fc)

Nyt on Kali Linux asennettu.

Vaihdoin asetuksista näppäimistöasettelun.

![image](https://github.com/JuuHil/PenTest/assets/122887067/110eca11-7500-4b1e-a3b1-86992ead3e26)

Add > Finnish > Finnish (classic)

![image](https://github.com/JuuHil/PenTest/assets/122887067/259cf796-097d-41e6-a77c-4a6d3f501df6)


## a) Ratkaise Over The Wire: Bandit kolme ensimmäistä tasoa (0-2)

### Bandit level 0

![image](https://github.com/JuuHil/PenTest/assets/122887067/1a56974b-a6af-4dcf-9539-82562f6560ce)

https://man7.org/linux/man-pages/man1/ssh.1.html

Kokeilin kirjautua peliin käyttäen ssh yhteyttä. 
Tehtävässä oli mainittu "username is bandit0"

```
ssh bandit0@bandit.labs.overthewire.org
```
Portti unohtui...

```
ssh bandit0@bandit.labs.overthewire.org -p 2220
```

![image](https://github.com/JuuHil/PenTest/assets/122887067/dfe0ec4f-3f7d-43e2-bdee-3a9b6b871b00)

### Bandit Level 0 -> Level 1

![image](https://github.com/JuuHil/PenTest/assets/122887067/6d547799-f691-4ca4-b1d6-14ed2a0384fa)

Katsoin cat:illa readme tiedostosta salasanan ja kopioin sen.

![image](https://github.com/JuuHil/PenTest/assets/122887067/53471ebe-f5be-4b8b-9f63-f23a33a3abf7)


Kirjauduin ulos ssh:sta exit komennolla ja takaisin sisään, mutta tällä kertaa bandit1 käyttäjälle. Salasanan liitin leikepöydältäni.

```
ssh bandit1@bandit.labs.overthewire.org -p 2220
```

![image](https://github.com/JuuHil/PenTest/assets/122887067/5036b871-ab4c-43af-b85a-1af08ab44f03)

### Bandit Level 1 -> Level 2

![image](https://github.com/JuuHil/PenTest/assets/122887067/1de5362a-5907-4368-819a-5ae98f31a1b4)

Nyt pitäisi saada luettua "-" nimisen tiedoston sisältä, eikä ```cat -``` toimi

![image](https://github.com/JuuHil/PenTest/assets/122887067/3d32c688-8448-4bbc-840f-582760402847)

Stackoverflow osasi auttaa (https://stackoverflow.com/questions/42187323/how-to-open-a-dashed-filename-using-terminal)

![image](https://github.com/JuuHil/PenTest/assets/122887067/d39ed86e-1636-4ac5-8a19-4f684d5e4b82)

Kirjauduin ulos ssh:sta exit komennolla ja takaisin sisään, mutta tällä kertaa bandit2 käyttäjälle. Salasanan liitin leikepöydältäni.

![image](https://github.com/JuuHil/PenTest/assets/122887067/1019cacc-49cc-4887-91f1-85c4d0233369)

### Bandit Level 2 -> Level 3

Seuraava olikin jo edellistä helpompi. cat:in jälkeen tabi täytti loppuun.

![image](https://github.com/JuuHil/PenTest/assets/122887067/a1793faf-3593-46a9-ba7a-ce7e93ce4f2a)




## b) Asenna WebGoat ja kokeile, että pääset kirjautumaan sisään.
Katsoin ohjeita (https://terokarvinen.com/2020/install-webgoat-web-pentest-practice-target/)

Asensin java 17.

``` sudo apt-get -y install openjdk-17-jre ufw wget bash-completion ```

Laitoin palomuurin päälle

``` sudo ufw enable ```

Latasin webgoat 8 wgetillä.
```wget https://terokarvinen.com/2020/install-webgoat-web-pentest-practice-target/webgoat-server-8.0.0.M26.jar ```

ja ajoin sen.

```java -jar webgoat-server-8.0.0.M26.jar```

Avasin selaimen ja sieltä menin sivulle http://localhost:8080/WebGoat/

Tein uuden käyttäjän "Register new user"

Kirjauduin sisään.

![image](https://github.com/JuuHil/PenTest/assets/122887067/d95881ca-19b9-42d5-a4f8-0cb42805debf)

## c) Ratkaise WebGoatista tehtävät "HTTP Basics" ja "Developer tools". Katso vinkit alta.

## HTTP Basics

#### HTTP Basics 2/3 
Avasin sivun "Inspect Element" painamalla F12 ja sieltä avasin "Network" välilehden, jotta voin tarkastella sivujan ja minun liikennettä.

Kirjoitin nimekseni "testi" ja painoin "Go!".

Network välilehdelle tuli "POST" pyyntö.

![image](https://github.com/JuuHil/PenTest/assets/122887067/47410dfd-b482-4b94-935f-c79ef84665eb)
#### HTTP Basics 3/3
Syötin edellisessä selvitetyn "POST" vastaukseksi ja painoin "GO"

![image](https://github.com/JuuHil/PenTest/assets/122887067/3349db89-9241-423b-bbc7-4a10981ce4b2)

Avasin Network välilehdellä Post pyynnön ja sieltä "Request"

HTTP pyynnöstä löytyi "magic_num:"

![image](https://github.com/JuuHil/PenTest/assets/122887067/46408460-630e-4bda-9c01-afea05256365)



![image](https://github.com/JuuHil/PenTest/assets/122887067/dfa75776-4a55-4da0-bc4d-0a15614f0aee)


## Developer tools

####  Developer tools 4/6

Kopion console:en javascript funktion: webgoat.customjs.phoneHome().
Console vastasi. phone home said{.......}

![image](https://github.com/JuuHil/PenTest/assets/122887067/d795acc4-489a-4ffe-9fbe-ca9cdb8d21b2)

#### Developer tools 6/6

Painoin sivulla "Go!", joka teki network välilehdelle POST pyynnön. HTTP pyynnön sisältä löytyi "networkNum:" jossa vastaus.

![image](https://github.com/JuuHil/PenTest/assets/122887067/34aebbd6-16b3-46b8-908d-9fea3f49034b)

![image](https://github.com/JuuHil/PenTest/assets/122887067/80151519-99e9-4f2c-b6b1-be999c065eb3)


## d) Ratkaise ja selitä PortSwigger Labs: Lab: SQL injection vulnerability in WHERE clause allowing retrieval of hidden data. Selitä, mitä tekniikoita kokeilit, ja mitä hyökkäyksesi eri osat tekevät.

https://portswigger.net/web-security/sql-injection/lab-retrieve-hidden-data

Tehtävän annossa oli annettu esimerkki, kuinka sovellus suorittaa SQL kyselyt.
```
SELECT * FROM products WHERE category = 'Gifts' AND released = 1
```

Alkuperäinen

``` /filter?category=Gifts ``` 

![image](https://github.com/JuuHil/PenTest/assets/122887067/93c632e6-f4d5-42cc-9439-902db5c7f84a)

Vastaus

``` /filter?category=Gifts' OR 1=1--```

``` /filter?category=Gifts'+OR+1=1--```

``` /filter?category=Gifts'+OR+TRUE--```

Kaikki kolme toimivat.

![image](https://github.com/JuuHil/PenTest/assets/122887067/89fe6b5a-30bd-4755-a2a5-8e4b7c759c7a)

Alussa oli ongelmia saada toimimaan, koska unohdin lopettaa kyselyn "--".

"'" sulkee edellisen kyselyn 

"OR 1=1" tai "OR TRUE" on ehto, joka on aina totta. Tällä laajennetaan kyselyä, jolloin se palauttaa kaikki tuotteet, myös ei julkaistut tuotteet.

"--" lopettaa SQL kyselyn.

"+" merkit korvaa välilyönnit URL-osoitteessa.


## f) Porttiskannaa 1000 tavallisinta tcp-porttia omasta koneestasi (localhost). Analysoi tulokset.

![image](https://github.com/JuuHil/PenTest/assets/122887067/e5db4a3b-bada-4889-bfc4-f30899db400b)

Starting Nmap .... ilmoittaa, että nmap on käynnistetty sen version ja ajankohdan.
Nmap scan report ... kertoo, että skannaus on suoritettu localhostiin (127.0.0.1)
Host is up .... kertoo, että localhost on saatavilla ja vasteaika (ping) on 0.000043 sekuntia.
Other address ... kertoo, että localhostilla on toinen osoite jota ei skannattu ::1 (IPv6)
All 1000 scanned ... Kaikki 1000 tcp porttia ovat "ignored"-tilassa. Nmap ei pysty määrittämään porttien tilaa.
Not shown: 1000 ... ilmoittaa ettei tuloksissa näytetä 1000 suljettua porttia.
Nmap done ... kertoo, että nmap suoritti skannauksen 1 osoitteeseen ja skannauksen keston. 


## g) Porttiskannaa kaikki koneesi (localhost) tcp-portit. Analysoi tulokset. (Edellisissä kohdissa mainittuja analyyseja ei tarvitse toistaa, voit vain viitata niihin ja keskittyä eroihin).

-p- = scannaa kaikki portit.

![image](https://github.com/JuuHil/PenTest/assets/122887067/f0863787-90d2-407c-b22b-311f9f8c2818)

Erot edelliseen. 
-Scannasi kaikki portit (65535)


## h) Tee laaja porttiskanaus (nmap -A) omalle koneellesi (localhost), kaikki portit. Selitä, mitä -A tekee. Analysoi tulokset. (Edellisissä kohdissa mainittuja analyyseja ei tarvitse toistaa, voit vain viitata niihin ja keskittyä eroihin.).

-A = aggressive scan.

![image](https://github.com/JuuHil/PenTest/assets/122887067/35073248-88cf-4228-a9d5-42b32e557c22)

Erot edelliseen.
- Agressiivinen skannaus.
  
## i) Asenna demoni tai pari (esim Apache ja SSH). Vertaile, miten localhost:n laajan porttiskannauksen tulos eroaa.

Asensin apachen omien ohjeideni mukaan.  (https://github.com/JuuHil/LinuServ/blob/main/Laksu/h/Real%20Internet.md)

![image](https://github.com/JuuHil/PenTest/assets/122887067/17a8cab9-3c2c-42ec-9789-fb731c3c2361)

Kun Apache on asennettu, nmap tunnistaa avoimen portin 80, joka kuuntelee HTTP palvelua. Myös apachen versio 2.4.58 on näkyvillä.

## j) Kokeile ja esittele jokin avointen lähteiden tiedusteluun sopiva weppisivu tai työkalu. Hyviä esimerkkejä löytyy Bazzel: IntelTechniques: Tools ja Bellingcat: Resources, voit myös käyttää muuta itse valitsemaasi työkalua. Työkalua pitää siis myös kokeilla, pelkkä nimen mainitseminen ei riitä. Pidä esimerkit harmittomina, älä julkaise kenenkään henkilökohtaisia salaisuuksia raportissasi.

Olin kuullut sivustosta  https://tryhackme.com aikaisemmin, mutta en ollut kokeillut sivua.
Tein käyttäjän ja sain eteeni kolme vaihtoehtoa.

![image](https://github.com/JuuHil/PenTest/assets/122887067/840d88fc-4d23-4a48-a385-64d034305149)

Valitsin JR PENETRATION TESTER

Intro tehtävä.

![image](https://github.com/JuuHil/PenTest/assets/122887067/98ad14ad-0112-4736-a46b-e36ca471eff7)

Tehtävä 1. 

![image](https://github.com/JuuHil/PenTest/assets/122887067/2d296ca5-1d38-4107-9e7c-b096f98f0094)

## Tehtävä 2.

### Step 1) Open a terminal 

![image](https://github.com/JuuHil/PenTest/assets/122887067/61eaea52-d8ff-47cd-8a73-5b483664e4b5)

Start machine ei toiminut ja olin jumissa. Etsin tietoa ja löysin tietoa että ensimmäisenä pitää suorittaa tutorial. (https://tryhackme.com/r/room/tutorial). Kävin avaamassa tutorialissa koneen. 

![image](https://github.com/JuuHil/PenTest/assets/122887067/31274a73-014e-4338-8f2f-1ed9dc5ffe63)

Palasin takaisin Offensive Security huoneeseen ja tällä kertaa Start Machine toimi.

![image](https://github.com/JuuHil/PenTest/assets/122887067/0ee644dd-04c0-4382-86f1-e888d7e93315)

### Step 2) Find hidden website pages

![image](https://github.com/JuuHil/PenTest/assets/122887067/8dae01cc-bd53-4810-b88f-90ccd6a8052f)

### Step 3) Hack the bank

![image](https://github.com/JuuHil/PenTest/assets/122887067/5a8f2d33-179f-412f-ade3-88d81faccb71)

![image](https://github.com/JuuHil/PenTest/assets/122887067/c61084f0-8ce6-4ade-bf4c-051488955cf3)


![image](https://github.com/JuuHil/PenTest/assets/122887067/72d9f307-4fd1-4bac-a298-25603b42f4af)

## Tehtävä 3.


![image](https://github.com/JuuHil/PenTest/assets/122887067/732f2245-9c3f-4e9a-9889-d8d5e2c8a3c0)






## k) Vapaaehtoinen: Tee lisää harjoituksia alustoilta, joihin tässä on tutustuttu: PortSwigger Academy, Over the Wire, WebGoat. Hakkeroimaan oppii hakkeroimalla.

## Lähteet

https://portswigger.net/web-security/sql-injection
https://terokarvinen.com/2024/eettinen-hakkerointi-2024/
https://www.w3schools.com/sql/sql_injection.asp
https://github.com/JuuHil/LinuServ/blob/main/Laksu/h/Real%20Internet.md
https://www.stationx.net/nmap-cheat-sheet/
